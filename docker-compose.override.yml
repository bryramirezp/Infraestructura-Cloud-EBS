services:
  backend:
    # El entrypoint.sh detecta ENVIRONMENT=development y ejecuta uvicorn con --reload automáticamente
    # No necesitamos sobrescribir el command, el entrypoint.sh lo maneja
    
    # Volumen para hot-reload: mapea código local directamente al contenedor
    # Esto permite que uvicorn --reload detecte cambios en el código
    volumes:
      - ./backend:/app:rw

    # Entorno específico de desarrollo
    # El entrypoint.sh detecta esto y ejecuta: uvicorn app.main:app --reload
    environment:
      - ENVIRONMENT=development